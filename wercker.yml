box: johanneslotz/julia 
build:
  steps:
    - script:
       name: run julia, install packages and run
       code: |
         julia --version
         julia -e 'Pkg.clone("https://github.com/JuliaLang/IterativeSolvers.jl")'
         julia -e 'Pkg.clone("https://github.com/lruthotto/KrylovMethods.jl.git")'
         julia -e 'Pkg.init(); run(`ln -s $(pwd()) $(Pkg.dir("DeformableRegistration"))`); Pkg.pin("DeformableRegistration"); Pkg.resolve()'
         julia -e 'using DeformableRegistration; @assert isdefined(:DeformableRegistration); @assert typeof(DeformableRegistration) === Module'
         julia --code-coverage ./test/runtests.jl

